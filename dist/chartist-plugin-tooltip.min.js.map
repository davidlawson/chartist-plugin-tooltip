{"version":3,"sources":["chartist-plugin-tooltip.js"],"names":["root","factory","define","amd","Chartist","returnExportsGlobal","exports","module","require","this","window","document","show","element","classList","add","hide","remove","hasClass","className","getAttribute","indexOf","next","nextSibling","text","innerText","textContent","defaultOptions","currency","undefined","tooltipOffset","x","y","appendToBody","class","setPosition","plugins","tooltip","options","extend","chart","on","event","selectors","callback","$chart","addEventListener","e","selectorIndex","target","height","$toolTip","offsetHeight","width","offsetWidth","style","top","pageY","left","pageX","layerY","offsetY","layerX","offsetX","tooltipSelectors","container","querySelector","createElement","body","appendChild","$point","tooltipText","seriesName","parentNode","meta","hasMeta","value","tooltipFnc","Pie","label","length","replace","innerHTML","tooltips"],"mappings":"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","file":"chartist-plugin-tooltip.min.js","sourcesContent":["(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([\"chartist\"], function (Chartist) {\n      return (root.returnExportsGlobal = factory(Chartist));\n    });\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like enviroments that support module.exports,\n    // like Node.\n    module.exports = factory(require(\"chartist\"));\n  } else {\n    root['Chartist.plugins.tooltips'] = factory(Chartist);\n  }\n}(this, function (Chartist) {\n\n  /**\n   * Chartist.js plugin to display a data label on top of the points in a line chart.\n   *\n   */\n  /* global Chartist */\n  (function (window, document, Chartist) {\n    'use strict';\n\n    var defaultOptions = {\n      currency: undefined,\n      tooltipOffset: {\n        x: 0,\n        y: -20\n      },\n      appendToBody: false,\n      class: undefined,\n      setPosition: true\n      // showTooltips: true,\n      // tooltipEvents: ['mousemove', 'touchstart', 'touchmove'],\n      // labelClass: 'ct-label',\n      // labelOffset: {\n      //   x: 0,\n      //   y: -10\n      // },\n      // textAnchor: 'middle'\n    };\n\n    Chartist.plugins = Chartist.plugins || {};\n    Chartist.plugins.tooltip = function (options) {\n      options = Chartist.extend({}, defaultOptions, options);\n\n      return function tooltip(chart) {\n        var tooltipSelectors = ['ct-point', 'ct-bar', 'ct-bar-background', 'ct-slice-donut', 'ct-slice-pie'];\n\n        var $chart = chart.container;\n        var $toolTip = $chart.querySelector('.chartist-tooltip');\n        if (!$toolTip) {\n          $toolTip = document.createElement('div');\n          $toolTip.className = (!options.class) ? 'chartist-tooltip' : 'chartist-tooltip ' + options.class;\n          if (!options.appendToBody) {\n            $chart.appendChild($toolTip);\n          } else {\n            document.body.appendChild($toolTip);\n          }\n        }\n        var height = $toolTip.offsetHeight;\n        var width = $toolTip.offsetWidth;\n\n        hide($toolTip);\n\n        function on(event, selectors, callback) {\n          $chart.addEventListener(event, function (e) {\n            if (!selectors)\n                callback(e);\n\n            for (var selectorIndex in selectors)\n            {\n              if (hasClass(e.target, selectors[selectorIndex]))\n              {\n                callback(e);\n                break;\n              }\n            }\n          });\n        }\n\n        on('mouseover', tooltipSelectors, function (event) {\n          var $point = event.target;\n          var tooltipText = '';\n\n          var seriesName = ($point.parentNode) ? $point.parentNode.getAttribute('ct:meta') || \n              $point.parentNode.getAttribute('ct:series-name') : '';\n          var meta = $point.getAttribute('ct:meta') || seriesName || '';\n          var hasMeta = !!meta;\n          var value = $point.getAttribute('ct:value') || ($point.parentNode ? $point.parentNode.getAttribute('ct:value') : '');\n\n          if (options.tooltipFnc) {\n            tooltipText = options.tooltipFnc(meta, value);\n          } else {\n\n            meta = '<span class=\"chartist-tooltip-meta\">' + meta + '</span>';\n            value = '<span class=\"chartist-tooltip-value\">' + value + '</span>';\n\n            if (hasMeta) {\n              tooltipText += meta + '<br>';\n            } else {\n              // For Pie Charts also take the labels into account\n              // Could add support for more charts here as well!\n              if (chart instanceof Chartist.Pie) {\n                var label = next($point, 'ct-label');\n                if (label.length > 0) {\n                  tooltipText += text(label) + '<br>';\n                }\n              }\n            }\n\n            if (options.currency) {\n              value = options.currency + value.replace(/(\\d)(?=(\\d{3})+(?:\\.\\d+)?$)/g, \"$1,\");\n            }\n            tooltipText += value;\n          }\n\n          $toolTip.innerHTML = tooltipText;\n\n          if (options.setPosition)\n            setPosition(event);\n\n          show($toolTip);\n\n          // Remember height and width to avoid wrong position in IE\n          height = $toolTip.offsetHeight;\n          width = $toolTip.offsetWidth;\n        });\n\n        on('mouseout', tooltipSelectors, function () {\n          hide($toolTip);\n        });\n\n        if (options.setPosition)\n        {\n          on('mousemove', null, function (event) {\n            setPosition(event);\n          });\n        }\n\n        function setPosition(event) {\n          // For some reasons, on FF, we can't rely on event.offsetX and event.offsetY,\n          // that's why we prioritize event.layerX and event.layerY\n          // see https://github.com/gionkunz/chartist-js/issues/381\n          height = height || $toolTip.offsetHeight;\n          width = width || $toolTip.offsetWidth;\n          if (!options.appendToBody) {\n            $toolTip.style.top = (event.layerY || event.offsetY) - height + options.tooltipOffset.y + 'px';\n            $toolTip.style.left = (event.layerX || event.offsetX) - width / 2 + options.tooltipOffset.x + 'px';\n          } else {\n            $toolTip.style.top = event.pageY - height  + options.tooltipOffset.y + 'px';\n            $toolTip.style.left = event.pageX - width / 2 + options.tooltipOffset.x + 'px';\n          }\n        }\n      }\n    };\n\n    function show(element) {\n      element.classList.add('tooltip-show');\n    }\n\n    function hide(element) {\n      element.classList.remove('tooltip-show');\n    }\n\n    function hasClass(element, className) {\n      return (' ' + element.getAttribute('class') + ' ').indexOf(' ' + className + ' ') > -1;\n    }\n\n    function next(element, className) {\n      do {\n        element = element.nextSibling;\n      } while (element && !hasClass(element, className));\n      return element;\n    }\n\n    function text(element) {\n      return element.innerText || element.textContent;\n    }\n\n  } (window, document, Chartist));\n  return Chartist.plugins.tooltips;\n\n}));\n"]}